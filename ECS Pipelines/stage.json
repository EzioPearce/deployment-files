{
    "family": "flam-net-request-stage",
    "taskRoleArn": "arn:aws:iam::214493502073:role/FlamServicesTaskRole",
    "executionRoleArn": "arn:aws:iam::214493502073:role/FlamServicesTaskRole",
    "networkMode": "bridge",
    "containerDefinitions": [
      {
        "name": "flam-net-request-stage",
        "image": "${IMAGE}",
        "cpu": 512,
        "memory": 256,
        "memoryReservation": 256,
        "portMappings": [
          {
            "containerPort": 3000,
            "hostPort": 0,
            "protocol": "tcp"
          }
        ],
        "essential": true,
        "environment": [
          {
            "name": "APP_ENVIROMENT",
            "value": "stage"
          },
          {
            "name": "CONTEXT",
            "value": "network/request"
          },
          {
            "name": "APP_PORT",
            "value": "3000"
          },
          {
            "name": "AWS_REGION",
            "value": "ap-south-1"
          },
          {
            "name": "REGION_NAME",
            "value": "ap-south-1"
          }
        ],
        "secrets": [
          
          {
            "name": "AWS_ACCESS_KEY_ID",
            "valueFrom": "/conf/net-request/stage/AWS_ACCESS_KEY_ID"
          },
          {
            "name": "AWS_SECRET_ACCESS_KEY",
            "valueFrom": "/conf/net-request/stage/AWS_SECRET_ACCESS_KEY"
          },
          {
            "name": "SQS_QUEUE_URL",
            "valueFrom": "/conf/net-request/stage/SQS_QUEUE_URL"
          },
          {
            "name": "BUCKET_NAME",
            "valueFrom": "/conf/net-request/stage/BUCKET_NAME"
          },
          {
            "name": "FILE_PREFIX",
            "valueFrom": "/conf/net-request/stage/FILE_PREFIX"
          },
          {
            "name": "AWS_BUCKET_NAME",
            "valueFrom": "/conf/net-request/stage/AWS_BUCKET_NAME"
          },
          {
            "name": "AWS_FILE_PREFIX",
            "valueFrom": "/conf/net-request/stage/AWS_FILE_PREFIX"
          },
          {
            "name": "UMS_AUTH_VERIFY_URL",
            "valueFrom": "/conf/net-request/stage/UMS_AUTH_VERIFY_URL"
          },
          {
            "name": "ACTIVITY_ADMIN_SECRET_KEY",
            "valueFrom": "/conf/net-request/stage/ACTIVITY_ADMIN_SECRET_KEY"
          },
          {
            "name": "DATABASE_MONGO_URL",
            "valueFrom": "/conf/net-request/stage/DATABASE_MONGO_URL"
          }
        ],
        "hostname": "flam-net-request",
        "dockerLabels": {
          "Environment": "stage",
          "Name": "flam-net-request",
          "Version": "${VERSION}"
        },
        "healthCheck": {
          "command": [
            "CMD-SHELL",
            "curl --fail http://localhost:3000/network/request/health || exit 1"
          ],
          "interval": 5,
          "timeout": 4,
          "retries": 3,
          "startPeriod": 5
        }
      }
    ],
    "requiresCompatibilities": ["EC2"],
    "cpu": "512",
    "memory": "256",
    "tags": [
      {
        "key": "GITHUB_BRANCH",
        "value": "${GITHUB_REF}"
      },
      {
        "key": "GITHUB_BUILD_NUMBER",
        "value": "${GITHUB_RUN_NUMBER}"
      },
      {
        "key": "GITHUB_COMMIT",
        "value": "${GITHUB_SHA}"
      },
      {
        "key": "GITHUB_REPO_URL",
        "value": "https://github.com/homingos/flam-services-net-request"
      },
      {
        "key": "Version",
        "value": "${VERSION}"
      },
      {
        "key": "Environment",
        "value": "stage"
      },
      {
        "key": "Name",
        "value": "flam-net-request"
      }
    ]
  }